<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>To Swabrah 💖</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Outfit:wght@300;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Outfit', sans-serif;
      background: url('Flo1.jpeg') no-repeat center center fixed;
      background-size: cover;
      color: #030202;
      position: relative;
      min-height: 100vh;
      overflow-x: hidden;
    }
    .backdrop-card {
      backdrop-filter: blur(12px) brightness(0.9);
      background-color: rgba(2, 2, 2, 0);
      border-radius: 20px;
      padding: 2rem;
      max-width: 90%;
      margin: 5rem auto 2rem;
      text-align: center;
      box-shadow: 0 8px 20px rgb(255, 0, 0);
      animation: fadeIn 1.5s ease;
    }
    .backdrop-card h1 {
      font-family: 'Great Vibes', cursive;
      font-size: 3rem;
      color: #000000;
      margin-bottom: 1rem;
    }
    .backdrop-card p {
      font-size: 1.2rem;
      color: #d9d3d3;
    }
  
    .hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 1;
    }
    .heart {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: pink;
      transform: rotate(45deg);
      animation: floatUp 6s linear infinite;
    }
    .heart::before,
    .heart::after {
      content: "";
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: pink;
      border-radius: 50%;
    }
    .heart::before {
      top: -10px;
      left: 0;
    }
    .heart::after {
      left: -10px;
      top: 0;
    }
    @keyframes floatUp {
      0% { transform: translateY(100vh) rotate(45deg); opacity: 1; }
      100% { transform: translateY(-10vh) rotate(45deg); opacity: 0; }
    }
    footer {
      position: relative;
      text-align: center;
      font-size: 0.9rem;
      color: #000000;
      margin-bottom: 1rem;
      z-index: 2;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .surprise-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 0.7rem 1.2rem;
      border: none;
      background-color: #040404;
      color: rgb(255, 253, 253);
      font-size: 1rem;
      border-radius: 30px;
      box-shadow: 0 4px 15px rgba(220, 2, 2, 0.4);
      cursor: pointer;
      z-index: 3;
      animation: fadeIn 2s ease;
    }
    .popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background-color: rgba(6, 5, 5, 0.95);
      color: #000000;
      padding: 2rem;
      border-radius: 15px;
      text-align: center;
      z-index: 999;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      transition: transform 0.4s ease;
    }
    .popup.show {
      transform: translate(-50%, -50%) scale(1);
    }
    .popup h2 {
      font-family: 'Great Vibes', cursive;
      font-size: 2.5rem;
      color: #ff65a3;
      margin-bottom: 1rem;
    }
    .popup p {
      font-size: 1.1rem;
    }
    .close-popup {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      background-color: #0d0c0c;
      border: none;
      border-radius: 10px;
      color: white;
      cursor: pointer;
    }
    @media (max-width: 600px) {
      .backdrop-card h1 {
        font-size: 2.3rem;
      }
      .swabrah-image {
        width: 150px;
        height: 130px;
        
      }
      .my-image {
        width: 50px;
        height: 50px;

      }
    }
    :root{
      --bg:#0b0c10;          /* deep night */
      --card:#0f1116;        /* soft dark */
      --accent:#ff5a78;      /* romantic pink */
      --accent-2:#ffd6e0;    /* soft blush */
      --text:#f6f7fb;        /* near-white */
      --muted:#a9adbd;       /* gentle gray */
      --gold:#ffd166;        /* highlight */
      --glass: rgba(255,255,255,0.04);
    }
    * { box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; font-family:Poppins, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
      color:var(--text); background:linear-gradient(180deg,#06060a,#0b0c10);
      overflow-x:hidden; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    /* Moving gradient background + subtle parallax */
    .moving-bg{
      position:fixed; inset:0; z-index:-10; pointer-events:none; overflow:hidden;
      background: radial-gradient(600px 360px at 10% 10%, rgba(255,90,120,0.06), transparent),
                  radial-gradient(700px 420px at 90% 80%, rgba(210,180,255,0.04), transparent),
                  linear-gradient(135deg, rgba(255,90,120,0.03), rgba(255,200,180,0.02));
      will-change:transform;
    }
    .particle-layer{ position:absolute; inset:0 }
    .sparkle { position:absolute; width:6px; height:6px; border-radius:50%; opacity:0.6; filter:blur(.6px); }

    /* NAV */
    .nav{ position:fixed; top:0; left:0; right:0; z-index:60; display:flex; align-items:center; justify-content:space-between; padding:12px 20px; backdrop-filter:saturate(140%) blur(8px); background:linear-gradient(180deg, rgba(18,20,27,.75), rgba(18,20,27,.35)); border-bottom:1px solid rgba(255,255,255,.04) }
    .brand{ font-weight:800; letter-spacing:.4px }
    .brand .dot{ color:var(--accent) }
    .nav .btn{ border:1px solid rgba(255,255,255,.08); color:var(--text); background:linear-gradient(180deg,#141722,#101218); padding:8px 12px; border-radius:999px; cursor:pointer; font-weight:700 }
    .nav .btn:hover{ transform:translateY(-2px); box-shadow:0 12px 30px rgba(255,90,120,0.12) }

    /* HERO */
    .hero{ min-height:84vh; display:grid; place-items:center; text-align:center; padding:96px 20px 40px; position:relative }
    .hero h1{ font-size:clamp(28px,5.5vw,56px); margin:0 0 6px }
    .glow{ background:linear-gradient(90deg,var(--accent),#b25cff,var(--gold)); -webkit-background-clip:text; background-clip:text; color:transparent; text-shadow:0 6px 30px rgba(255,90,120,0.07) }
    .hero p{ color:var(--muted); margin:0 0 18px }

    .cta{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap }
    .primary,.secondary{ padding:10px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.06); cursor:pointer }
    .primary{ background:linear-gradient(180deg,var(--accent),#ff2d55); color:white; font-weight:800 }
    .secondary{ background:transparent; color:var(--text) }

    /* Page sections */
    section{ padding:56px 18px; max-width:1180px; margin:0 auto }
    .card{ background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)); border:1px solid rgba(255,255,255,.03); border-radius:18px; padding:18px }

    /* Gallery grid: 1 col (<=520px), 2 cols (<=900px), 3 cols default */
    .grid{ display:grid; gap:14px; grid-template-columns:repeat(1,1fr) }
    @media(min-width:520px){ .grid{ grid-template-columns:repeat(2,1fr) } }
    @media(min-width:900px){ .grid{ grid-template-columns:repeat(3,1fr) } }

    /* Make items larger and immersive */
    .g-item{ position:relative; overflow:visible; border-radius:20px; padding:8px; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.04)); border:1px solid rgba(255,255,255,0.04); box-shadow:0 8px 30px rgba(3,6,12,0.6); }
    .g-frame{ position:relative; width:100%; overflow:hidden; border-radius:14px; background:#000 }
    .g-frame img, .g-frame video{ display:block; width:100%; height:auto; object-fit:cover; aspect-ratio:4/3; }

    /* Decorative shaped border overlay (transparent so image not cropped) */
    .g-item::before{ content:''; position:absolute; inset:10px; pointer-events:none; z-index:4; border-radius: 28% 72% 65% 35% / 45% 55% 45% 55%; border:3px solid rgba(255,255,255,0.06); mix-blend-mode:overlay; transition:transform .45s cubic-bezier(.2,.9,.3,1), box-shadow .3s }
    .g-item.shape-pill::before{ border-radius:999px }
    .g-item.shape-blob::before{ border-radius: 40% 60% 55% 45% / 45% 55% 45% 55% }
    .g-item.shape-angled::before{ border-radius: 8px 36px 8px 36px / 12px 32px 12px 32px }
    .g-item:hover::before{ transform:scale(1.03) rotate(-1deg); box-shadow:0 18px 50px rgba(255,90,120,0.08) }

    /* tags and captions */
    .tag{ position:absolute; left:12px; top:12px; background:linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.25)); padding:6px 10px; border-radius:999px; font-size:12px; border:1px solid rgba(255,255,255,.08); z-index:6 }
    .caption{ padding:10px 12px; color:var(--muted); font-size:13px }

    /* Hover & focus animations */
    .g-item:hover{ transform:translateY(-6px); transition:transform .35s cubic-bezier(.2,.9,.3,1) }
    .g-item:focus-within{ outline:2px solid rgba(255,90,120,0.12) }
    .g-frame img, .g-frame video{ transition:transform .6s cubic-bezier(.2,.9,.3,1), filter .45s }
    .g-item:hover .g-frame img, .g-item:hover .g-frame video{ transform:scale(1.06); filter:brightness(1.02) saturate(1.06) }

    /* Fade-in on scroll */
    .fade-in{ opacity:0; transform:translateY(18px); transition:opacity .8s ease, transform .8s ease }
    .fade-in.visible{ opacity:1; transform:translateY(0) }

   
    /* Lightbox (fullscreen viewer) */
    .lightbox{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:linear-gradient(180deg, rgba(5,6,8,0.85), rgba(0,0,0,0.85)); z-index:120 }
    .lightbox.active{ display:flex }
    .lightbox .inner{ position:relative; width:min(1100px,95vw); max-height:92vh; display:grid; place-items:center }
    .lightbox-media{ max-width:100%; max-height:92vh; border-radius:12px; box-shadow:0 30px 80px rgba(0,0,0,0.7) }
    .lightbox .close, .lightbox .nav-btn{ position:absolute; top:18px; background:rgba(0,0,0,0.4); border:1px solid rgba(255,255,255,0.06); color:var(--text); padding:8px 10px; border-radius:10px; cursor:pointer }
    .lightbox .close{ right:18px }
    .lightbox .nav-btn{ top:50%; transform:translateY(-50%); left:12px; right:auto }
    .lightbox .nav-btn.next{ left:auto; right:12px }

    /* small screens adjustments */
    @media(max-width:520px){ .nav .btn{ padding:6px 8px; font-size:13px } .hero{ padding-top:80px } }

    /* tiny sparkle particles */
    .tiny{ width:4px; height:4px; border-radius:50%; background:rgba(255,240,255,0.5); filter:blur(.8px); position:absolute }

    footer{ padding:28px 20px 80px; text-align:center; color:var(--muted) }

  </style>
</head>
<body>
  ead>
<body>
  <!-- Moving background + particle layers -->
  <div class="moving-bg" id="movingBg">
    <div class="particle-layer" id="particleLayer"></div>
  </div>

  <!-- NAV -->
  <div class="nav">
    <div class="brand">Marian <span class="glow">SANDARNES</span><span class="dot">♥</span></div>
    <div style="display:flex; gap:8px; align-items:center">
      <button class="btn" id="playBtn" aria-label="Play music">💖</button>
      <button class="btn" id="revealBtn" aria-label="Open surprise">❤</button>
    </div>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="fade-in">
      <h1> HAPPY BIRTHDAY<span class="glow">MARIAN❤</span></h1>
      <p id="typewriter">Here you come to a whole new year of blessing</p>
      <div class="cta">
        <button class="primary" id="spawnHearts">Tap for hearts</button>
        <button class="secondary" id="scrollToMemories">See our memories</button>
      </div>
    </div>
  </header>

  <!-- REVEAL MESSAGE -->
  <section>
    <div class="card reveal fade-in">
      <div class="scramble" id="scramble">HAPPY BIRTHDAY </div>
      <p style="max-width:72ch; color:var(--muted); margin:8px auto">From the first smile to every little laugh. This page is a tiny piece of how big love time grows.</p>
      <div style="display:flex; gap:10px; justify-content:center; margin-top:8px">
        <button class="primary" id="showModal">Read full notSe</button>
        <button class="secondary" id="copyLink">Copy this link</button>
      </div>
    </div>
  </section>

  <!-- GALLERY -->
  <section id="memories">
    <h2 style="color:var(--accent); text-align:center">Little Memories, Big Feelings</h2>
    <div class="grid" id="grid">
      <!-- Example items (keep your filenames) -->
      <figure class="g-item shape-blob fade-in" tabindex="0">
        <div class="g-frame"><img src="marian1.jpg" alt="Angel"></div>
        <figcaption class="tag">Angel</figcaption>
        <div class="caption">City lights, that night</div>
      </figure>

      <figure class="g-item shape-pill fade-in" tabindex="0">
        <div class="g-frame"><video src="Marian.mp4" playsinline controls></video></div>
        <figcaption class="tag">Video</figcaption>
        <div class="caption">Mariana</div>
      </figure>
      <figure class="g-item shape-pill fade-in" tabindex="0">
        <div class="g-frame"><video src="Tendo.mp4" playsinline controls></video></div>
        <figcaption class="tag">Video</figcaption>
        <div class="caption">Tendo</div>
      </figure>

      <figure class="g-item shape-angled fade-in" tabindex="0">
        <div class="g-frame"><img src="marian2.jpg" alt="Coffee date"></div>
        <figcaption class="tag">No face</figcaption>
        <div class="caption">Coffee giggles</div>
      </figure>

      <figure class="g-item shape-blob fade-in" tabindex="0">
        <div class="g-frame"><img src="marian3.jpg" alt="Eyes"></div>
        <figcaption class="tag">Eyes</figcaption>
        <div class="caption">That look...</div>
      </figure>

      <figure class="g-item shape-pill fade-in" tabindex="0">
        <div class="g-frame"><img src="pro.jpg" alt="Roadtrip"></div>
        <figcaption class="tag">Ooops</figcaption>
        <div class="caption">Road trip memories</div>
      </figure>

      <figure class="g-item shape-angled fade-in" tabindex="0">
        <div class="g-frame"><img src="marian5.jpg" alt="Stargazing"></div>
        <figcaption class="tag">Memories</figcaption>
        <div class="caption">Stargazing</div>
      </figure>

      <figure class="g-item shape-blob fade-in" tabindex="0">
        <div class="g-frame"><img src="marian6.jpg" alt="Laughing together"></div>
        <figcaption class="tag">#</figcaption>
        <div class="caption">We laughed so hard</div>
      </figure>

    </div>
  </section>

  <!-- COUNTDOWN -->
  <section>
    <div class="card fade-in">
      <h3 style="margin:0 0 8px">Countdown to YOUR NEXT BD</h3>
      <div style="display:flex; gap:10px; justify-content:center; margin-top:12px">
        <div style="background:#0f1116; padding:12px; border-radius:12px; text-align:center"><div id="d" style="font-weight:800; font-size:20px">00</div><div style="color:var(--muted); font-size:12px">Days</div></div>
        <div style="background:#0f1116; padding:12px; border-radius:12px; text-align:center"><div id="h" style="font-weight:800; font-size:20px">00</div><div style="color:var(--muted); font-size:12px">Hours</div></div>
        <div style="background:#0f1116; padding:12px; border-radius:12px; text-align:center"><div id="m" style="font-weight:800; font-size:20px">00</div><div style="color:var(--muted); font-size:12px">Minutes</div></div>
        <div style="background:#0f1116; padding:12px; border-radius:12px; text-align:center"><div id="s" style="font-weight:800; font-size:20px">00</div><div style="color:var(--muted); font-size:12px">Seconds</div></div>
      </div>
    </div>
  </section>

  <footer>
    TendoS tech we build the future
  </footer>

  <!-- MODAL -->
  <div class="modal" id="modal">
    <div class="panel">
      <button class="close" id="closeModal">Close</button>
      <h3>TENDOS TECH</h3>
      <!-- <p>Please allow this our memorystorage feel free to send some pics for storage. Don’t forget that we both see the images saved here so we can share memories and a unique gallery. You’re my favorite human. Your kindness, your laugh, the way you light up a room — I notice it all. I’m grateful for you. Thank you for choosing me too. Here’s to many more shared sunsets, inside jokes, and dreams we’ll build together.</p> -->
      <!-- <p><strong>Always, Tendo.</strong></p> -->
    </div>
  </div>

  
  <!-- AUDIO -->
  <audio id="song" preload="auto">
    <source src="" type="audio/mpeg">
  </audio>
  <audio autoplay loop>
    <source src="love.mp3" type="audio/mpeg">
  </audio>

  <div class="hearts"></div>


  <div class="popup" id="popup">
    <h2>HAPPY BIRTHDAY MARIAN 💞</h2>
    <p>
   
    </p>
    <button class="close-popup" onclick="hideSurprise()">Close</button>
  </div>

  <div class="backdrop-card">
    
    <p>
        Well allow me take this chance and also tell you that this webpage is created by TENDO JOB PROSPER 'ME' silly,
        anyuway maybe i didnt tell you but im a web designer i do codding and computer programing so i decided
        to spare some time off work and i code something sweet for ma friend, i kmow there are many gifts i 
        would have given you but due to the distance it cant be done maybe someday God willing but allow 
        this be my gift to you💖 Oh something i didnt tell you im now a pastor 
          .
    </p>

</h>
  
  <script>
    const heartContainer = document.querySelector('.hearts');
    for (let i = 0; i < 40; i++) {
      const heart = document.createElement('div');
      heart.classList.add('heart');
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.animationDelay = Math.random() * 5 + 's';
      heart.style.backgroundColor = ['#ff7eb3', '#ff65a3', '#fb6f92', '#ffc2d1'][Math.floor(Math.random() * 4)];
      heartContainer.appendChild(heart);
    }

    function showSurprise() {
      document.getElementById('popup').classList.add('show');
    }

    function hideSurprise() {
      document.getElementById('popup').classList.remove('show');
    }
     // ====== CONFIG ======
     const RECIPIENT_NAME = 'MARIAN';
    const SPECIAL_DATE = '2026-09-13T00:00:00';
    const LOVE_LINES = ['Let this be your year','i hope ur still sturborn as you used to be ','Jeremiah 29:11'
    ,'Keep that smile shining'];
    // ====================

    // Basic elements
    const playBtn = document.getElementById('playBtn');
    const revealBtn = document.getElementById('revealBtn');
    const song = document.getElementById('song');

    playBtn.addEventListener('click', async ()=>{
      try{
        if(song.paused){ await song.play(); playBtn.textContent='Pause song'; animateMusic(true); }
        else { song.pause(); playBtn.textContent='Play song'; animateMusic(false); }
      }catch(e){ alert('Add a song link to the audio tag in the HTML.'); }
    });

    function animateMusic(on){ if(on) document.body.classList.add('music-on'); else document.body.classList.remove('music-on'); }

    // Modal
    document.getElementById('showModal').addEventListener('click', ()=> document.getElementById('modal').classList.add('active'));
    document.getElementById('closeModal').addEventListener('click', ()=> document.getElementById('modal').classList.remove('active'));
    document.getElementById('modal').addEventListener('click', (e)=>{ if(e.target.id==='modal') e.currentTarget.classList.remove('active'); });

    // Smooth scroll
    document.getElementById('scrollToMemories').addEventListener('click', ()=> document.getElementById('memories').scrollIntoView({behavior:'smooth'}));

    // Copy link
    document.getElementById('copyLink')?.addEventListener('click', async ()=>{ try{ await navigator.clipboard.writeText(location.href); alert('Link copied!'); }catch{ alert('Could not copy link.'); } });

    // Typewriter
    const tw = document.getElementById('typewriter'); let i=0,char=0,deleting=false;
    function type(){ const line = LOVE_LINES[i%LOVE_LINES.length]; if(!deleting){ tw.textContent = line.slice(0,++char); if(char===line.length){ deleting=true; setTimeout(type,1400); return } } else { tw.textContent=line.slice(0,--char); if(char===0){ deleting=false; i++; } } setTimeout(type, deleting?30:50); } type();

    // Scramble
    const chars = 'MARIAN SANDARNES ❤'; const scr = document.getElementById('scramble'); function scrambleTo(newText){ let target=newText,
         frame=0, scrambling=true; const int=setInterval(()=>{ frame++; const revealed=Math.min(target.length, Math.floor(frame/2)); 
            scr.textContent = target.split('').map((ch,idx)=> idx<revealed? ch : chars[Math.floor(Math.random()*chars.length)]).join(''); if(revealed>=target.length){ clearInterval(int);
                 scrambling=false } },30);}
             setInterval(()=> scrambleTo(`TENDO + ${RECIPIENT_NAME.toUpperCase()} = generations`),6000);

    // Countdown
    const dEl=document.getElementById('d'), hEl=document.getElementById('h'), 
    mEl=document.getElementById('m'), sEl=document.getElementById('s');
    function tick(){ const now=new Date(); const end=new Date(SPECIAL_DATE); 
        const diff=Math.max(0,end-now); const d=Math.floor(diff/(1000*60*60*24)); const h=Math.floor(diff/(1000*60*60))%24; const m=Math.floor(diff/(1000*60))%60; const s=Math.floor(diff/1000)%60; dEl.textContent=String(d).padStart(2,'0'); 
        hEl.textContent=String(h).padStart(2,'0'); mEl.textContent=String(m).padStart(2,'0'); sEl.textContent=String(s).padStart(2,'0'); }
    tick(); setInterval(tick,1000);

    
    // Fade-in on scroll
    const io = new IntersectionObserver((entries)=>{ entries.forEach(entry=>{ if(entry.isIntersecting){ entry.target.classList.add('visible'); io.unobserve(entry.target); } }); },{threshold:.12});
    document.querySelectorAll('.fade-in').forEach(el=> io.observe(el));

    // Drag & drop to add local images/videos
    const grid = document.getElementById('grid');
    grid.addEventListener('dragover', (ev)=>{ ev.preventDefault(); grid.style.opacity=.95; });
    grid.addEventListener('dragleave', ()=>{ grid.style.opacity=1 });
    grid.addEventListener('drop', (ev)=>{ ev.preventDefault(); grid.style.opacity=1; const files = Array.from(ev.dataTransfer.files).filter(f=> f.type.startsWith('image/') || f.type.startsWith('video/')); files.forEach(file=>{ const url = URL.createObjectURL(file); const fig = document.createElement('figure'); fig.className='g-item shape-blob fade-in'; fig.tabIndex=0; const frame = document.createElement('div'); frame.className='g-frame'; if(file.type.startsWith('image/')){ const img=document.createElement('img'); img.src=url; img.alt=file.name; frame.appendChild(img); } else { const vid=document.createElement('video'); vid.src=url; vid.controls=true; vid.playsInline=true; frame.appendChild(vid); } const cap=document.createElement('figcaption'); cap.className='tag'; cap.textContent='New'; const caption=document.createElement('div'); caption.className='caption'; caption.textContent=file.name; fig.appendChild(frame); fig.appendChild(cap); fig.appendChild(caption); grid.prepend(fig); io.observe(fig); registerLightboxItem(fig); }); });

    // Moving background particles & parallax follow mouse
    const particleLayer = document.getElementById('particleLayer');
    function makeSparkles(n=30){ for(let i=0;i<n;i++){ const el = document.createElement('div'); el.className='sparkle'; el.style.left = Math.random()*100+'%'; el.style.top = Math.random()*100+'%'; el.style.width = (4+Math.random()*6)+'px'; el.style.height = el.style.width; el.style.opacity = 0.2+Math.random()*0.6; el.style.background = ['rgba(255,200,220,0.7)','rgba(200,180,255,0.6)','rgba(255,240,200,0.5)'][Math.floor(Math.random()*3)]; particleLayer.appendChild(el); } }
    makeSparkles(40);
    // background parallax
    const movingBg = document.getElementById('movingBg');
    window.addEventListener('mousemove',(e)=>{ const rx = (e.clientX / innerWidth - 0.5) * 14; const ry = (e.clientY / innerHeight - 0.5) * 14; movingBg.style.transform = `translate(${rx}px, ${ry}px)`; });

    // Lightbox implementation
    const lightbox = document.getElementById('lightbox'); const lbContent = document.getElementById('lbContent'); const lbClose = document.getElementById('lbClose'); const lbPrev = document.getElementById('lbPrev'); const lbNext = document.getElementById('lbNext');
    let items = Array.from(document.querySelectorAll('.g-item')); let currentIndex = 0;

    function registerLightboxItem(fig){ const idx = items.length; items.push(fig); fig.addEventListener('click', ()=> openLightbox(idx)); fig.addEventListener('keydown',(e)=>{ if(e.key==='Enter') openLightbox(idx); }); }
    // register initial items
    items.forEach((fig,idx)=>{ registerLightboxItem(fig); });

    function openLightbox(idx){ currentIndex = idx; const fig = items[idx]; const frame = fig.querySelector('.g-frame'); const media = frame.querySelector('img, video'); lbContent.innerHTML=''; if(!media) return; if(media.tagName.toLowerCase()==='img'){ const img = document.createElement('img'); img.src = media.src; img.className='lightbox-media'; lbContent.appendChild(img); } else { const vid = document.createElement('video'); vid.src = media.src; vid.controls=true; vid.autoplay=true; vid.className='lightbox-media'; lbContent.appendChild(vid); }
      lightbox.classList.add('active'); lightbox.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; }
    function closeLightbox(){ lightbox.classList.remove('active'); lightbox.setAttribute('aria-hidden','true'); lbContent.innerHTML=''; document.body.style.overflow=''; }
    function showNext(n=1){ currentIndex = (currentIndex + n + items.length) % items.length; openLightbox(currentIndex); }
    lbClose.addEventListener('click', closeLightbox); lbPrev.addEventListener('click', ()=> showNext(-1)); lbNext.addEventListener('click', ()=> showNext(1));
    lightbox.addEventListener('click',(e)=>{ if(e.target===lightbox) closeLightbox(); });
    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closeLightbox(); if(e.key==='ArrowRight') showNext(1); if(e.key==='ArrowLeft') showNext(-1); });

    // Register initial items to lightbox properly (avoid duplicates)
    items = []; document.querySelectorAll('.g-item').forEach(el=>{ items.push(el); el.addEventListener('click', ()=> openLightbox(items.indexOf(el))); el.tabIndex=0; });

    // Touch swipe for lightbox
    let touchStartX=0, touchEndX=0;
    lbContent.addEventListener('touchstart', (e)=> touchStartX = e.changedTouches[0].screenX );
    lbContent.addEventListener('touchend', (e)=>{ touchEndX = e.changedTouches[0].screenX; if(touchEndX - touchStartX > 40) showNext(-1); else if(touchStartX - touchEndX > 40) showNext(1); });

    // Accessibility: focus trap simple
    lightbox.addEventListener('keydown',(e)=>{ if(e.key==='Tab'){ const focusables = lightbox.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'); if(focusables.length>0){ e.preventDefault(); focusables[0].focus(); } } });

    // Register click->open on dynamically added items helper
    function registerAll(){ items = Array.from(document.querySelectorAll('.g-item')); items.forEach((el,idx)=>{ el.onclick = ()=> openLightbox(idx); el.onkeydown = (e)=>{ if(e.key==='Enter') openLightbox(idx); }; }); }
    registerAll();

    // Make images bigger on small screens: adjust CSS via JS for extremely small devices
    function adjustImageSizes(){ if(window.innerWidth < 420){ document.querySelectorAll('.g-frame img, .g-frame video').forEach(m=> m.style.aspectRatio='3/2'); } else { document.querySelectorAll('.g-frame img, .g-frame video').forEach(m=> m.style.aspectRatio='4/3'); } }
    window.addEventListener('resize', adjustImageSizes); adjustImageSizes();

    // tiny floating particles animation loop
    function animateParticles(){ const nodes = particleLayer.children; for(let i=0;i<nodes.length;i++){ const el = nodes[i]; const top = parseFloat(el.style.top); let newTop = top - 0.02 - Math.random()*0.12; if(newTop < -5) newTop = 105; el.style.top = newTop + '%'; } requestAnimationFrame(animateParticles); }
    animateParticles();

    // small UI nicety: press and hold spawn hearts rapid
    let heartHoldTimer = null; document.getElementById('spawnHearts').addEventListener('pointerdown', ()=>{ heartHoldTimer = setInterval(()=> spawnHeart(Math.random()*innerWidth, innerHeight*0.6 + Math.random()*innerHeight*0.3), 120); }); document.addEventListener('pointerup', ()=> clearInterval(heartHoldTimer));

    // accessibility: close modal with Escape
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ document.getElementById('modal').classList.remove('active'); closeLightbox(); } });

  </script>
</body>
</html>
